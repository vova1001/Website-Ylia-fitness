{"version":3,"file":"static/js/97.ac9cfa1b.chunk.js","mappings":"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","sources":["webpack://juliaazhivaeva/./src/pages/RecoverForm.module.css?6e81","pages/RecoverForm.jsx","hooks/useAuth.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"recovery_utils\":\"RecoverForm_recovery_utils__dsLWq\",\"back_btn\":\"RecoverForm_back_btn__MisbG\",\"resetPassword-title\":\"RecoverForm_resetPassword-title__7wDJ2\",\"resetPassword-paragraph\":\"RecoverForm_resetPassword-paragraph__KmBDs\",\"input\":\"RecoverForm_input__uBlc2\",\"btn\":\"RecoverForm_btn__viXor\",\"recover-wrapper\":\"RecoverForm_recover-wrapper__n6aPj\",\"recover-form\":\"RecoverForm_recover-form__siTMe\",\"btn_wrapper\":\"RecoverForm_btn_wrapper__+FDII\",\"error\":\"RecoverForm_error__vVi4n\",\"error_border\":\"RecoverForm_error_border__BfrEB\",\"visible\":\"RecoverForm_visible__7BuBO\",\"email_sended\":\"RecoverForm_email_sended__B-Ovq\",\"wrapper_header\":\"RecoverForm_wrapper_header__zX3Q1\",\"pc_br\":\"RecoverForm_pc_br__RoUbl\"};","import styles from \"./RecoverForm.module.css\";\nimport { Link } from \"react-router-dom\";\nimport { Loader } from \"../components/Loader\";\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"../hooks/useAuth\";\nimport { useForm } from \"react-hook-form\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function RecoverForm() {\n  const [isLoading, setIsLoading] = useState(false);\n  const { recover } = useAuth();\n  const { register, setError, handleSubmit, formState } = useForm({\n    mode: \"onSubmit\",\n    reValidateMode: \"onSubmit\",\n  });\n  const { errors } = formState;\n  const navigate = useNavigate();\n  const [email, setEmail] = useState(\"\");\n  const emailError = errors.email?.message;\n  const hasEmailError = Boolean(emailError);\n  const [emailErrorText, setEmailErrorText] = useState(\"\");\n  const [isSended, setIsSended] = useState(false);\n  const submit = async ({ email }) => {\n    setIsLoading(true);\n    const res = await recover(email);\n\n    if (!res.ok) {\n      switch (res.message) {\n        case \"there is no user with this email, please register\":\n          setError(\"email\", {\n            type: \"server\",\n            message: \"Несуществующая почта!\",\n          });\n          break;\n        default:\n          setError(\"email\", {\n            type: \"server\",\n            message: `Непредвиденная ошибка. \\n Пожалуйста, повторите почту`,\n          });\n          break;\n      }\n      setIsLoading(false);\n    }\n    setEmail(email);\n    setIsLoading(false);\n    setIsSended(true);\n    return;\n  };\n\n  useEffect(() => {\n    if (emailError) {\n      setEmailErrorText(emailError);\n    }\n  }, [emailError]);\n\n  return (\n    <>\n      {isLoading && <Loader />}\n      <div className={styles[\"wrapper_header\"]}>\n        <h2 onClick={() => navigate(\"/\")}>JULIIAZHIVAEVA</h2>\n        <button onClick={() => navigate(\"/\")}>\n          <svg\n            width=\"28\"\n            height=\"28\"\n            viewBox=\"0 0 28 28\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M0.43868 0.43868C0.71993 0.157779 1.10118 0 1.49868 0C1.89618 0 2.27743 0.157779 2.55868 0.43868L26.5587 24.4387C26.7061 24.576 26.8243 24.7416 26.9062 24.9256C26.9882 25.1096 27.0323 25.3082 27.0359 25.5096C27.0394 25.711 27.0024 25.9111 26.9269 26.0979C26.8515 26.2847 26.7392 26.4543 26.5968 26.5968C26.4543 26.7392 26.2847 26.8515 26.0979 26.9269C25.9111 27.0024 25.711 27.0394 25.5096 27.0359C25.3082 27.0323 25.1096 26.9882 24.9256 26.9062C24.7416 26.8243 24.576 26.7061 24.4387 26.5587L0.43868 2.55868C0.157779 2.27743 0 1.89618 0 1.49868C0 1.10118 0.157779 0.71993 0.43868 0.43868Z\"\n              fill=\"#FBE0F3\"\n            />\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M26.5587 0.43868C26.8396 0.71993 26.9974 1.10118 26.9974 1.49868C26.9974 1.89618 26.8396 2.27743 26.5587 2.55868L2.55872 26.5587C2.27437 26.8236 1.89827 26.9679 1.50967 26.961C1.12107 26.9542 0.750299 26.7968 0.475473 26.5219C0.200646 26.2471 0.0432229 25.8763 0.0363665 25.4877C0.0295101 25.0991 0.173756 24.723 0.438716 24.4387L24.4387 0.43868C24.72 0.157779 25.1012 0 25.4987 0C25.8962 0 26.2775 0.157779 26.5587 0.43868Z\"\n              fill=\"#FBE0F3\"\n            />\n          </svg>\n        </button>\n      </div>\n      <div className={styles[\"recover-wrapper\"]}>\n        <div className={styles[\"recovery_utils\"]}>\n          <Link to={\"/login\"} className={styles[\"back_btn\"]}>\n            <svg\n              width=\"32\"\n              height=\"32\"\n              viewBox=\"0 0 32 32\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <circle\n                cx=\"16\"\n                cy=\"16\"\n                r=\"15.5\"\n                fill=\"#FEFFB3\"\n                stroke=\"#262427\"\n              />\n              <path d=\"M20 8L12 16L20 24\" stroke=\"#262427\" />\n            </svg>\n          </Link>\n          <h2 className={styles[\"resetPassword-title\"]}>\n            Восстановление пароля\n          </h2>\n        </div>\n        {isSended ? (\n          <h3 className={styles[\"email_sended\"]}>\n            Отправили письмо на <span>{email}.</span> <br />\n            Пожалуйста, перейдите по ссылке из письма, <br />\n            чтобы сбросить пароль.\n          </h3>\n        ) : (\n          <>\n            <p className={styles[\"resetPassword-paragraph\"]}>\n              Введите почту от учетной записи, чтобы мы{\" \"}\n              <br className={styles[\"pc_br\"]} />\n              прислали вам письмо для сброса пароля\n            </p>\n            <form\n              className={styles[\"recover-form\"]}\n              action=\"submit\"\n              onSubmit={handleSubmit(submit)}\n              noValidate\n            >\n              <input\n                type=\"email\"\n                placeholder=\"Почта\"\n                {...register(\"email\", {\n                  required: \"Введите почту\",\n                  pattern: {\n                    value: /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$/,\n                    message: \"Неверный формат почты, пример - ivanova@mail.ru\",\n                  },\n                })}\n                className={`${styles.input} ${hasEmailError ? styles[\"error_border\"] : \"\"}`}\n              />\n              <p\n                className={`${styles.error} ${hasEmailError ? styles.visible : \"\"}`}\n              >\n                {emailErrorText}\n              </p>\n              <button\n                type=\"submit\"\n                className={`${styles[\"btn\"]} ${styles[\"reset_btn\"]}`}\n              >\n                ВОССТАНОВИТЬ\n                <svg\n                  width=\"7\"\n                  height=\"7\"\n                  viewBox=\"0 0 7 7\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M6.51037 0.500372C6.51037 0.22423 6.28651 0.000372279 6.01037 0.000372153L1.51037 0.000372553C1.23423 0.000372385 1.01037 0.22423 1.01037 0.500372C1.01037 0.776515 1.23423 1.00037 1.51037 1.00037L5.51037 1.00037L5.51037 5.00037C5.51037 5.27651 5.73423 5.50037 6.01037 5.50037C6.28651 5.50037 6.51037 5.27651 6.51037 5.00037L6.51037 0.500372ZM0.353516 6.15723L0.707069 6.51078L6.36392 0.853926L6.01037 0.500372L5.65682 0.146819L-3.77595e-05 5.80367L0.353516 6.15723Z\"\n                    fill=\"#FBE0F3\"\n                  />\n                </svg>\n              </button>\n            </form>\n          </>\n        )}\n      </div>\n    </>\n  );\n}\n","import * as api from \"../api/api\";\nimport { useSetStatus, myStore } from \"../store/store\";\nexport function useAuth() {\n  const setStatus = useSetStatus();\n  const register = async (registerDataFromModal) => {\n    const { registerEmail, registerPassword } = registerDataFromModal;\n\n    const payload = {\n      email: registerEmail,\n      password: registerPassword,\n    };\n    const data = await api.fetchApi(\"/registerUser\", \"POST\", payload);\n    return data;\n  };\n\n  const auth = async (authDataFromModal) => {\n    const { loginEmail, loginPassword } = authDataFromModal;\n\n    const payload = {\n      email: loginEmail,\n      password: loginPassword,\n    };\n    const data = await api.fetchApi(\"/authUser\", \"POST\", payload);\n    if (data.ok) {\n      localStorage.setItem(\"token\", data.data.jwt_token);\n      setStatus(\"auth\");\n    }\n    return data;\n  };\n\n  const recover = async (email) => {\n    const payload = { email: email };\n    const data = await api.fetchApi(\"/fogotPassword\", \"POST\", payload);\n    return data;\n  };\n\n  const sendRecover = async (recoverData) => {\n    const { token, password } = recoverData;\n    const payload = { new_pass: password, token };\n    const data = await api.fetchApi(\"/resetPassword\", \"POST\", payload);\n    return data;\n  };\n\n  const addCart = async (id) => {\n    const payload = { id_product: id };\n    const res = await api.fetchApi(\"/auth/basket/add\", \"POST\", payload);\n    if (res.ok) {\n      myStore.setState((state) => ({\n        cartDetails: [...state.cartDetails, id],\n      }));\n    }\n    return res;\n  };\n\n  const remElemCart = async (id) => {\n    const payload = { delete_item_id: id };\n    const res = await api.fetchApi(\"/auth/basket/item\", \"DELETE\", payload);\n    if (res.ok) {\n      myStore.setState((state) => ({\n        cartDetails: state.cartDetails.filter((itemId) => itemId !== id),\n      }));\n    }\n    return res;\n  };\n\n  const getPayLink = async () => {\n    const res = await api.fetchApi(\"/auth/purchase\", \"GET\");\n    if (typeof res === \"string\") return res.trim();\n    const url = res?.url ?? res?.data?.url ?? res?.data;\n    if (typeof url === \"string\") return url.trim();\n    throw new Error(\"Ошибка\");\n  };\n\n  const extendCouse = async (payload) => {\n    const res = await api.fetchApi(\"/auth/purchase/extension\", \"POST\", {\n      course_id: payload,\n    });\n    console.log(res);\n    if (typeof res === \"string\") return res.trim();\n    const url = res?.url ?? res?.data?.url ?? res?.data;\n    if (typeof url === \"string\") return url.trim();\n    throw new Error(\"Ошибка\");\n  };\n\n  return {\n    extendCouse,\n    getPayLink,\n    register,\n    auth,\n    recover,\n    sendRecover,\n    addCart,\n    remElemCart,\n  };\n}\n"],"names":["RecoverForm","_errors$email","isLoading","setIsLoading","useState","recover","useAuth","register","setError","handleSubmit","formState","useForm","mode","reValidateMode","errors","navigate","useNavigate","email","setEmail","emailError","message","hasEmailError","Boolean","emailErrorText","setEmailErrorText","isSended","setIsSended","useEffect","_jsxs","_Fragment","children","_jsx","Loader","className","styles","onClick","width","height","viewBox","fill","xmlns","fillRule","clipRule","d","Link","to","cx","cy","r","stroke","action","onSubmit","async","_ref","res","ok","type","noValidate","_objectSpread","placeholder","required","pattern","value","concat","input","error","visible","setStatus","useSetStatus","extendCouse","_ref2","_res$url2","_res$data2","api","course_id","payload","console","log","trim","url","data","Error","getPayLink","_res$url","_res$data","registerEmail","registerPassword","registerDataFromModal","password","auth","loginEmail","loginPassword","authDataFromModal","localStorage","setItem","jwt_token","sendRecover","token","recoverData","new_pass","addCart","id_product","id","myStore","setState","state","cartDetails","remElemCart","delete_item_id","filter","itemId"],"ignoreList":[],"sourceRoot":""}